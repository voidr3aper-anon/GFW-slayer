[
    {
        "remarks": "THIVOID-ROBUST-SERVERLESS-EMERGENCY-ADD-ON-FOR-IRAN",
        "log": {
            "loglevel": "warning",
            "dnsLog": false
        },
        "dns": {
            "disableECS": true,
            "queryStrategy": "UseIPv4",
            "tag": "dns",
            "disableCache": false,
            "serveStale": true,
            "serveExpiredTTL": 3600,
            "disableFallback": false,
            "disableFallbackIfMatch": true,
            "enableParallelQuery": true,
            "useSystemHosts": false,

            "hosts": {
            "dns.google": ["8.8.8.8", "8.8.4.4"],
            "cloudflare-dns.com": ["104.16.248.249", "104.16.133.229"],
            "dns.quad9.net": ["9.9.9.9", "149.112.112.112"],
            "base.dns.mullvad.net": ["194.242.2.4"],
            "doh.dns.sb": ["185.222.222.222", "45.11.45.11"],
            "dns-doh.dnsforfamily.com": ["94.130.180.225", "78.47.64.161"],
            "freedns.controld.com": ["76.76.2.33", "76.76.10.33"],
            "dns.nextdns.io": ["45.90.30.0","45.90.28.0"],
            "unfiltered.joindns4.eu": ["86.54.11.200","86.54.11.100"],
            "ada.openbld.net": ["146.112.41.102","146.112.41.2"],
            "sky.rethinkdns.com": ["104.18.0.48","8.47.69.0"],
            "mozilla.cloudflare-dns.com": ["162.159.61.4","172.64.41.4"],
            "doh.flashstart.com": ["185.236.104.104"],
            "anti-ban.dynx.pro": ["10.139.177.17"]
            },

            "servers": [
            {
                "address": "https://cloudflare-dns.com/dns-query",
                "proxyOutboundTag": "dns-frag-out"
            },
            {
                "address": "https://sky.rethinkdns.com/dns-query",
                "proxyOutboundTag": "dns-frag-out"
            },
            {
                "address": "h2c://1.1.1.1/dns-query",
                "proxyOutboundTag": "doh-wrap-frag-out",
                "skipFallback": true,
                "timeoutMs": 1200
            },
            {
                "address": "https://dns.quad9.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://1.1.1.1/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "skipFallback": true,
                "timeoutMs": 1200
            },
            {
                "address": "https://dns.google/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://dns.quad9.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 2000
            },
            {
                "address": "https://base.dns.mullvad.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 2000
            },
            {
                "address": "https://doh.dns.sb/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 2000
            },
            {
                "address": "https://dns-doh.dnsforfamily.com/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 2000
            },

            "tcp://1.1.1.1:53",
            "tcp://9.9.9.9:53"
            ]
        },

        "inbounds": [
            {
            "listen": "127.0.0.1",
            "port": 10808,
            "protocol": "socks",
            "settings": { "auth": "noauth", "udp": true, "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "socks-in"
            },
            {
            "listen": "127.0.0.1",
            "port": 10809,
            "protocol": "http",
            "settings": { "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "http-in"
            },
            {
            "port": 10853,
            "protocol": "dokodemo-door",
            "settings": { "address": "8.8.8.8", "network": "tcp,udp", "port": 53 },
            "tag": "dns-in"
            }
        ],

        "outbounds": [
            {
            "protocol": "freedom",
            "tag": "frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "1-5",
                "length": "1-9",
                "interval": "0-6"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dns-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "1-5",
                "length": "1-9",
                "interval": "0-5"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dot-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "1-5",
                "length": "1-9",
                "interval": "0-8"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 15000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "direct-out",
            "settings": { "domainStrategy": "AsIs" },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "socks",
            "tag": "telegram-proxy",
            "settings": {
                "servers": [{ "address": "104.248.197.67", "port": 1080 }]
            },
            "proxySettings": { "tag": "frag-out" }
            },

            { "protocol": "dns", "tag": "dns-out" },

            {
            "protocol": "blackhole",
            "tag": "block",
            "settings": { "response": { "type": "http" } }
            }
        ],

        "policy": {
            "levels": {
            "8": { "connIdle": 600, "handshake": 12, "uplinkOnly": 1, "downlinkOnly": 1 }
            }
        },

        "routing": {
            "domainStrategy": "IPIfNonMatch",
            "rules": [
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "udp",
                "port": 443,
                "outboundTag": "block"
            },

            { "type": "field", "inboundTag": ["dns-in"], "outboundTag": "dns-out" },
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "port": 53,
                "outboundTag": "dns-out"
            },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "tcp",
                "port": 853,
                "outboundTag": "dot-frag-out"
            },

            { "type": "field", "domain": ["geosite:telegram"], "outboundTag": "telegram-proxy" },

            { "type": "field", "domain": ["domain:ir"], "outboundTag": "direct-out" },
            { "type": "field", "ip": ["geoip:ir", "geoip:private"], "outboundTag": "direct-out" },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "outboundTag": "frag-out"
            }
            ]
        }
    },
    {
        "remarks": "THIVOID-FAST-ROBUST-SERVERLESS-EMERGENCY-ADD-ON-FOR-IRAN",
        "log": {
            "loglevel": "warning",
            "dnsLog": false
        },

        "dns": {
            "disableECS": true,
            "queryStrategy": "UseIPv4",
            "tag": "dns",
            "disableCache": false,
            "serveStale": true,
            "serveExpiredTTL": 3600,
            "disableFallback": false,
            "disableFallbackIfMatch": true,
            "enableParallelQuery": true,
            "useSystemHosts": false,

            "hosts": {
            "cloudflare-dns.com": ["1.1.1.1", "1.0.0.1"],
            "dns.google": ["8.8.8.8", "8.8.4.4"],
            "dns.quad9.net": ["9.9.9.9", "149.112.112.112"]
            },

            "servers": [
            {
                "address": "https://cloudflare-dns.com/dns-query",
                "proxyOutboundTag": "direct-out",
                "timeoutMs": 900,
                "skipFallback": true
            },
            {
                "address": "https://cloudflare-dns.com/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1300
            },
            {
                "address": "https://dns.google/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://dns.quad9.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },

            "tcp://1.1.1.1:53",
            "tcp://8.8.8.8:53"
            ]
        },

        "inbounds": [
            {
            "listen": "127.0.0.1",
            "port": 10808,
            "protocol": "socks",
            "settings": { "auth": "noauth", "udp": true, "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "socks-in"
            },
            {
            "listen": "127.0.0.1",
            "port": 10809,
            "protocol": "http",
            "settings": { "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "http-in"
            },
            {
            "port": 10853,
            "protocol": "dokodemo-door",
            "settings": { "address": "8.8.8.8", "network": "tcp,udp", "port": 53 },
            "tag": "dns-in"
            }
        ],

        "outbounds": [
            {
            "protocol": "freedom",
            "tag": "frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "30-120",
                "interval": "0-5"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dns-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "20-90",
                "interval": "0-4"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dot-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "20-100",
                "interval": "0-6"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 15000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "direct-out",
            "settings": { "domainStrategy": "AsIs" },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "socks",
            "tag": "telegram-proxy",
            "settings": {
                "servers": [{ "address": "104.248.197.67", "port": 1080 }]
            },
            "proxySettings": { "tag": "frag-out" }
            },

            { "protocol": "dns", "tag": "dns-out" },

            {
            "protocol": "blackhole",
            "tag": "block",
            "settings": { "response": { "type": "http" } }
            }
        ],

        "policy": {
            "levels": {
            "8": { "connIdle": 600, "handshake": 12, "uplinkOnly": 1, "downlinkOnly": 1 }
            }
        },

        "routing": {
            "domainStrategy": "IPIfNonMatch",
            "rules": [
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "udp",
                "port": 443,
                "outboundTag": "block"
            },

            { "type": "field", "inboundTag": ["dns-in"], "outboundTag": "dns-out" },
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "port": 53,
                "outboundTag": "dns-out"
            },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "tcp",
                "port": 853,
                "outboundTag": "dot-frag-out"
            },

            { "type": "field", "domain": ["geosite:telegram"], "outboundTag": "telegram-proxy" },

            { "type": "field", "domain": ["domain:ir"], "outboundTag": "direct-out" },
            { "type": "field", "ip": ["geoip:ir", "geoip:private"], "outboundTag": "direct-out" },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "outboundTag": "frag-out"
            }
            ]
        }
    },
    {
        "remarks": "THIVOID-ROBUST-SOSO-SERVERLESS-EMERGENCY-ADD-ON-FOR-IRAN",
        "log": {
            "loglevel": "debug",
            "dnsLog": true
        },
        "dns": {
            "disableECS": true,
            "queryStrategy": "UseIPv4",
            "tag": "dns",
            "disableCache": false,
            "serveStale": true,
            "serveExpiredTTL": 3600,
            "disableFallback": false,
            "disableFallbackIfMatch": true,
            "enableParallelQuery": true,
            "useSystemHosts": false,

            "hosts": {
            "dns.google": ["8.8.8.8", "8.8.4.4"],
            "cloudflare-dns.com": ["104.16.248.249", "104.16.133.229"],
            "dns.quad9.net": ["9.9.9.9", "149.112.112.112"],
            "base.dns.mullvad.net": ["194.242.2.4"],
            "doh.dns.sb": ["185.222.222.222", "45.11.45.11"],
            "dns-doh.dnsforfamily.com": ["94.130.180.225", "78.47.64.161"],
            "freedns.controld.com": ["76.76.2.33", "76.76.10.33"],
            "dns.nextdns.io": ["45.90.30.0","45.90.28.0"],
            "unfiltered.joindns4.eu": ["86.54.11.200","86.54.11.100"],
            "ada.openbld.net": ["146.112.41.102","146.112.41.2"],
            "sky.rethinkdns.com": ["104.18.0.48","8.47.69.0"],
            "mozilla.cloudflare-dns.com": ["162.159.61.4","172.64.41.4"],
            "doh.flashstart.com": ["185.236.104.104"],
            "anti-ban.dynx.pro": ["10.139.177.17"]
            },

            "servers": [
            {
                "address": "https://cloudflare-dns.com/dns-query",
                "proxyOutboundTag": "dns-frag-out"
            },
            {
                "address": "https://sky.rethinkdns.com/dns-query",
                "proxyOutboundTag": "dns-frag-out"
            },
            {
                "address": "h2c://1.1.1.1/dns-query",
                "proxyOutboundTag": "doh-wrap-frag-out",
                "skipFallback": true,
                "timeoutMs": 1200
            },
            {
                "address": "https://dns.quad9.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://1.1.1.1/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "skipFallback": true,
                "timeoutMs": 1200
            },
            {
                "address": "https://dns.google/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://dns.quad9.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://base.dns.mullvad.net/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://doh.dns.sb/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },
            {
                "address": "https://dns-doh.dnsforfamily.com/dns-query",
                "proxyOutboundTag": "dns-frag-out",
                "timeoutMs": 1500
            },

            "tcp://1.1.1.1:53",
            "tcp://9.9.9.9:53"
            ]
        },

        "inbounds": [
            {
            "listen": "127.0.0.1",
            "port": 10808,
            "protocol": "socks",
            "settings": { "auth": "noauth", "udp": true, "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "socks-in"
            },
            {
            "listen": "127.0.0.1",
            "port": 10809,
            "protocol": "http",
            "settings": { "userLevel": 8 },
            "sniffing": {
                "enabled": true,
                "destOverride": ["http", "tls", "quic"],
                "metadataOnly": true,
                "routeOnly": true
            },
            "tag": "http-in"
            },
            {
            "port": 10853,
            "protocol": "dokodemo-door",
            "settings": { "address": "8.8.8.8", "network": "tcp,udp", "port": 53 },
            "tag": "dns-in"
            }
        ],

        "outbounds": [
            {
            "protocol": "freedom",
            "tag": "frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "20-80",
                "interval": "0-6"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dns-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "20-70",
                "interval": "0-5"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "dot-frag-out",
            "settings": {
                "domainStrategy": "AsIs",
                "fragment": {
                "packets": "tlshello",
                "length": "20-80",
                "interval": "0-8"
                }
            },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 15000
                }
            }
            },

            {
            "protocol": "freedom",
            "tag": "direct-out",
            "settings": { "domainStrategy": "AsIs" },
            "streamSettings": {
                "sockopt": {
                "domainStrategy": "UseIPv4",
                "tcpNoDelay": true,
                "tcpKeepAliveIdle": 45,
                "tcpKeepAliveInterval": 45,
                "tcpUserTimeout": 12000
                }
            }
            },

            {
            "protocol": "socks",
            "tag": "telegram-proxy",
            "settings": {
                "servers": [{ "address": "104.248.197.67", "port": 1080 }]
            },
            "proxySettings": { "tag": "frag-out" }
            },

            { "protocol": "dns", "tag": "dns-out" },

            {
            "protocol": "blackhole",
            "tag": "block",
            "settings": { "response": { "type": "http" } }
            }
        ],

        "policy": {
            "levels": {
            "8": { "connIdle": 600, "handshake": 12, "uplinkOnly": 1, "downlinkOnly": 1 }
            }
        },

        "routing": {
            "domainStrategy": "IPIfNonMatch",
            "rules": [
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "udp",
                "port": 443,
                "outboundTag": "block"
            },

            { "type": "field", "inboundTag": ["dns-in"], "outboundTag": "dns-out" },
            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "port": 53,
                "outboundTag": "dns-out"
            },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "network": "tcp",
                "port": 853,
                "outboundTag": "dot-frag-out"
            },

            { "type": "field", "domain": ["geosite:telegram"], "outboundTag": "telegram-proxy" },

            { "type": "field", "domain": ["domain:ir"], "outboundTag": "direct-out" },
            { "type": "field", "ip": ["geoip:ir", "geoip:private"], "outboundTag": "direct-out" },

            {
                "type": "field",
                "inboundTag": ["socks-in", "http-in"],
                "outboundTag": "frag-out"
            }
            ]
        }
    },
    {
      "remarks": "THIVOID-ROBUST-SERVERLESS-EMERGENCY-FAST-hamrahðŸ”µ",
      "log": {
        "loglevel": "warning",
        "dnsLog": false
      },
      "dns": {
        "disableECS": true,
        "queryStrategy": "UseIPv4",
        "tag": "dns",
        "disableCache": false,
        "serveStale": true,
        "serveExpiredTTL": 3600,
        "disableFallback": false,
        "disableFallbackIfMatch": true,
        "enableParallelQuery": true,
        "useSystemHosts": false,
        "hosts": {
          "dns.google": [
            "8.8.8.8",
            "8.8.4.4"
          ],
          "cloudflare-dns.com": [
            "104.16.248.249",
            "104.16.133.229"
          ],
          "dns.quad9.net": [
            "9.9.9.9",
            "149.112.112.112"
          ],
          "base.dns.mullvad.net": [
            "194.242.2.4"
          ],
          "doh.dns.sb": [
            "185.222.222.222",
            "45.11.45.11"
          ],
          "dns-doh.dnsforfamily.com": [
            "94.130.180.225",
            "78.47.64.161"
          ],
          "freedns.controld.com": [
            "76.76.2.33",
            "76.76.10.33"
          ],
          "dns.nextdns.io": [
            "45.90.30.0",
            "45.90.28.0"
          ],
          "unfiltered.joindns4.eu": [
            "86.54.11.200",
            "86.54.11.100"
          ],
          "ada.openbld.net": [
            "146.112.41.102",
            "146.112.41.2"
          ],
          "sky.rethinkdns.com": [
            "104.18.0.48",
            "8.47.69.0"
          ],
          "mozilla.cloudflare-dns.com": [
            "162.159.61.4",
            "172.64.41.4"
          ],
          "doh.flashstart.com": [
            "185.236.104.104"
          ],
          "anti-ban.dynx.pro": [
            "10.139.177.17"
          ]
        },
        "servers": [
          {
            "address": "https://cloudflare-dns.com/dns-query",
            "proxyOutboundTag": "dns-frag-out"
          },
          {
            "address": "https://sky.rethinkdns.com/dns-query",
            "proxyOutboundTag": "dns-frag-out"
          },
          {
            "address": "h2c://1.1.1.1/dns-query",
            "proxyOutboundTag": "doh-wrap-frag-out",
            "skipFallback": true,
            "timeoutMs": 1200
          },
    
          "tcp://1.1.1.1:53",
          "tcp://9.9.9.9:53"
        ]
      },
      "inbounds": [
        {
          "listen": "127.0.0.1",
          "port": 10808,
          "protocol": "socks",
          "settings": {
            "auth": "noauth",
            "udp": true,
            "userLevel": 8
          },
          "sniffing": {
            "enabled": true,
            "destOverride": [
              "http",
              "tls",
              "quic"
            ],
            "metadataOnly": true,
            "routeOnly": true
          },
          "tag": "socks-in"
        },
        {
          "listen": "127.0.0.1",
          "port": 10809,
          "protocol": "http",
          "settings": {
            "userLevel": 8
          },
          "sniffing": {
            "enabled": true,
            "destOverride": [
              "http",
              "tls",
              "quic"
            ],
            "metadataOnly": true,
            "routeOnly": true
          },
          "tag": "http-in"
        },
        {
          "port": 10853,
          "protocol": "dokodemo-door",
          "settings": {
            "address": "8.8.8.8",
            "network": "tcp,udp",
            "port": 53
          },
          "tag": "dns-in"
        }
      ],
      "outbounds": [
        {
          "protocol": "freedom",
          "tag": "frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-6"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "dns-frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-5"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "dot-frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-8"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 15000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "direct-out",
          "settings": {
            "domainStrategy": "AsIs"
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "socks",
          "tag": "telegram-proxy",
          "settings": {
            "servers": [
              {
                "address": "104.248.197.67",
                "port": 1080
              }
            ]
          },
          "proxySettings": {
            "tag": "frag-out"
          }
        },
        {
          "protocol": "dns",
          "tag": "dns-out"
        },
        {
          "protocol": "blackhole",
          "tag": "block",
          "settings": {
            "response": {
              "type": "http"
            }
          }
        }
      ],
      "policy": {
        "levels": {
          "8": {
            "connIdle": 600,
            "handshake": 12,
            "uplinkOnly": 1,
            "downlinkOnly": 1
          }
        }
      },
      "routing": {
        "domainStrategy": "IPIfNonMatch",
        "rules": [
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "network": "udp",
            "port": 443,
            "outboundTag": "block"
          },
          {
            "type": "field",
            "inboundTag": [
              "dns-in"
            ],
            "outboundTag": "dns-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "port": 53,
            "outboundTag": "dns-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "network": "tcp",
            "port": 853,
            "outboundTag": "dot-frag-out"
          },
          {
            "type": "field",
            "domain": [
              "geosite:telegram"
            ],
            "outboundTag": "telegram-proxy"
          },
          {
            "type": "field",
            "domain": [
              "domain:ir"
            ],
            "outboundTag": "direct-out"
          },
          {
            "type": "field",
            "ip": [
              "geoip:ir",
              "geoip:private"
            ],
            "outboundTag": "direct-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "outboundTag": "frag-out"
          }
        ]
      }
    },
    {
      "remarks": "THIVOID-ROBUST-SERVERLESS-EMERGENCY-fast-irancellðŸŸ¡",
      "log": {
        "loglevel": "debug",
        "dnsLog": true
      },
      "dns": {
        "disableECS": true,
        "queryStrategy": "UseIPv4",
        "tag": "dns",
        "disableCache": false,
        "serveStale": true,
        "serveExpiredTTL": 3600,
        "disableFallback": false,
        "disableFallbackIfMatch": true,
        "enableParallelQuery": true,
        "useSystemHosts": false,
        "hosts": {
          "cloudflare-dns.com": [
            "104.16.248.249",
            "104.16.133.229"
          ],
          "sky.rethinkdns.com": [
            "104.18.0.48",
            "8.47.69.0"
          ],
    	  "sky.rethinkdns.com": [
            "86.54.11.100",
            "86.54.11.200"
          ]
        },
        "servers": [
          {
            "address": "https://cloudflare-dns.com/dns-query",
            "proxyOutboundTag": "dns-frag-out"
          },
          {
            "address": "https://sky.rethinkdns.com/dns-query",
            "proxyOutboundTag": "dns-frag-out"
          },
          {
            "address": "https://unfiltered.joindns4.eu/dns-query",
            "proxyOutboundTag": "dns-frag-out"
          },	  
          {
            "address": "h2c://1.1.1.1/dns-query",
            "proxyOutboundTag": "doh-wrap-frag-out",
            "skipFallback": true,
            "timeoutMs": 1200
          },
          "tcp://1.1.1.1:53",
          "tcp://9.9.9.9:53"
        ]
      },
      "inbounds": [
        {
          "listen": "127.0.0.1",
          "port": 10808,
          "protocol": "socks",
          "settings": {
            "auth": "noauth",
            "udp": true,
            "userLevel": 8
          },
          "sniffing": {
            "enabled": true,
            "destOverride": [
              "http",
              "tls",
              "quic"
            ],
            "metadataOnly": true,
            "routeOnly": true
          },
          "tag": "socks-in"
        },
        {
          "listen": "127.0.0.1",
          "port": 10809,
          "protocol": "http",
          "settings": {
            "userLevel": 8
          },
          "sniffing": {
            "enabled": true,
            "destOverride": [
              "http",
              "tls",
              "quic"
            ],
            "metadataOnly": true,
            "routeOnly": true
          },
          "tag": "http-in"
        },
        {
          "port": 10853,
          "protocol": "dokodemo-door",
          "settings": {
            "address": "8.8.8.8",
            "network": "tcp,udp",
            "port": 53
          },
          "tag": "dns-in"
        }
      ],
      "outbounds": [
        {
          "protocol": "freedom",
          "tag": "frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-6"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "dns-frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-5"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "dot-frag-out",
          "settings": {
            "domainStrategy": "AsIs",
            "fragment": {
              "packets": "1-5",
              "length": "1-9",
              "interval": "0-8"
            }
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 15000
            }
          }
        },
        {
          "protocol": "freedom",
          "tag": "direct-out",
          "settings": {
            "domainStrategy": "AsIs"
          },
          "streamSettings": {
            "sockopt": {
              "domainStrategy": "UseIPv4",
              "tcpNoDelay": true,
              "tcpKeepAliveIdle": 45,
              "tcpKeepAliveInterval": 45,
              "tcpUserTimeout": 12000
            }
          }
        },
        {
          "protocol": "socks",
          "tag": "telegram-proxy",
          "settings": {
            "servers": [
              {
                "address": "104.248.197.67",
                "port": 1080
              }
            ]
          },
          "proxySettings": {
            "tag": "frag-out"
          }
        },
        {
          "protocol": "dns",
          "tag": "dns-out"
        },
        {
          "protocol": "blackhole",
          "tag": "block",
          "settings": {
            "response": {
              "type": "http"
            }
          }
        }
      ],
      "policy": {
        "levels": {
          "8": {
            "connIdle": 600,
            "handshake": 12,
            "uplinkOnly": 1,
            "downlinkOnly": 1
          }
        }
      },
      "routing": {
        "domainStrategy": "IPIfNonMatch",
        "rules": [
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "network": "udp",
            "port": 443,
            "outboundTag": "block"
          },
          {
            "type": "field",
            "inboundTag": [
              "dns-in"
            ],
            "outboundTag": "dns-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "port": 53,
            "outboundTag": "dns-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "network": "tcp",
            "port": 853,
            "outboundTag": "dot-frag-out"
          },
          {
            "type": "field",
            "domain": [
              "geosite:telegram"
            ],
            "outboundTag": "telegram-proxy"
          },
          {
            "type": "field",
            "domain": [
              "domain:ir"
            ],
            "outboundTag": "direct-out"
          },
          {
            "type": "field",
            "ip": [
              "geoip:ir",
              "geoip:private"
            ],
            "outboundTag": "direct-out"
          },
          {
            "type": "field",
            "inboundTag": [
              "socks-in",
              "http-in"
            ],
            "outboundTag": "frag-out"
          }
        ]
  }
}
]
